import{e as g,L as k,M as S,o as _,a as i,F as I,r as L,H,b as e,t,G as d,I as x,f as C,g as u,h as l,i as b,S as B}from"./index-F1vNAxrB.js";const N={class:"history__info"},T=e("div",{class:"history__who"},"протоиерей Кирилл Щевелев",-1),V={class:"history__date"},$={key:0,class:"history__acceptgive"},j={class:"history__nameorggive"},z={class:"history__name"},D={class:"history__org-life"},E={class:"history__org-give"},F={class:"history__datelife"},O={class:"history__count"},G={key:1,class:"history__change"},R={key:0,class:"history__change-item"},Y=e("div",{class:"history__change-item--name"},"Название:",-1),A={class:"history__change-item--data"},M=e("div",{class:"history__change-item--arrow"},"⇒",-1),q={class:"history__change-item--data"},J={key:1,class:"history__change-item"},K=e("div",{class:"history__change-item--name"},"Количество:",-1),P={class:"history__change-item--data"},Q=e("div",{class:"history__change-item--arrow"},"⇒",-1),U={class:"history__change-item--data"},W={key:2,class:"history__change-item"},X=e("div",{class:"history__change-item--name"},"Срок годности:",-1),Z={class:"history__change-item--data"},ss=e("div",{class:"history__change-item--arrow"},"⇒",-1),es={class:"history__change-item--data"},v=15,ts={__name:"HistoryGroupe",async setup(m){let n,r;const c=g(null),h=g(([n,r]=k(()=>y(0,v)),n=await n,r(),n));async function y(o,a){let{data:s,error:is}=await x.from("HISTORY").select("*").order("date",{ascending:!1}).range(o,a);return s}async function f(o){try{const a=await y(o,o+v);h.value.push(...a)}catch(a){console.log(a)}}S(c,async()=>{await f(h.value.length)},{distance:10});function p(o){let a=o.split("T");return a[0]=a[0].split("-").reverse().join("-"),a.join(" ")}function w(o){return o!=="2000-01-01"?o.split("-").reverse().join("-"):"∞"}return(o,a)=>(_(),i("div",{class:"height__body",ref_key:"listEl",ref:c},[(_(!0),i(I,null,L(h.value,s=>(_(),i("div",{class:H(["history__item",{"item-green":!!s.organization,"item-red":!!s.giver,"item-yellow":!!s.change}]),key:s.id},[e("div",N,[T,e("div",V,t(p(s.date)),1)]),s.change?(_(),i("div",G,[s.name!==s.change.name?(_(),i("div",R,[Y,e("div",A,t(s.name),1),M,e("div",q,t(s.change.name),1)])):d("",!0),s.count!==s.change.count?(_(),i("div",J,[K,e("div",P,t(s.count),1),Q,e("div",U,t(s.change.count),1)])):d("",!0),s.dateLife!==s.change.dateLife?(_(),i("div",W,[X,e("div",Z,t(s.dateLife),1),ss,e("div",es,t(s.change.dateLife),1)])):d("",!0)])):(_(),i("div",$,[e("div",j,[e("div",z,t(s.name),1),e("div",D,[e("div",E,t(s.organization||s.giver),1),e("div",F,t(w(s.dateLife)),1)])]),e("div",O,t(s.count),1)]))],2))),128))],512))}},os={class:"history"},as=e("h1",null,"История",-1),_s=e("div",{class:"history__load"},[e("span",{class:"loader"})],-1),cs={__name:"HistoryView",setup(m){return(n,r)=>{const c=C("router-link");return _(),i("div",os,[u(c,{to:{name:"Home"}},{default:l(()=>[as]),_:1}),(_(),b(B,null,{fallback:l(()=>[_s]),default:l(()=>[u(ts)]),_:1}))])}}};export{cs as default};
