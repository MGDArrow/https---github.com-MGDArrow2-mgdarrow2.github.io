import{e as l,L as I,M as S,o,a as _,F as L,r as H,H as x,b as e,t,G as r,I as C,f as b,g as v,h as y,i as B,S as F}from"./index-SP2z9WD4.js";const N={class:"history__info"},T=e("div",{class:"history__who"},"протоиерей Кирилл Щевелев",-1),V={class:"history__date"},$={key:0,class:"history__acceptgive"},j={class:"history__nameorggive"},z={class:"history__name"},D={class:"history__org-life"},E={class:"history__org-give"},O={class:"history__datelife"},G={class:"history__count"},R={key:1,class:"history__change"},Y={key:0,class:"history__change-item"},A={class:"history__change-item--data-one"},M={key:1,class:"history__change-item"},q=e("div",{class:"history__change-item--name"},"Название:",-1),J={class:"history__change-item--data"},K=e("div",{class:"history__change-item--arrow"},"⇒",-1),P={class:"history__change-item--data"},Q={key:2,class:"history__change-item"},U=e("div",{class:"history__change-item--name"},"Количество:",-1),W={class:"history__change-item--data"},X=e("div",{class:"history__change-item--arrow"},"⇒",-1),Z={class:"history__change-item--data"},ss={key:3,class:"history__change-item"},es=e("div",{class:"history__change-item--name"},"Срок годности:",-1),ts={class:"history__change-item--data"},as=e("div",{class:"history__change-item--arrow"},"⇒",-1),os={class:"history__change-item--data"},m=15,ns={__name:"HistoryGroupe",async setup(f){let i,h;const c=l(null),d=l(([i,h]=I(()=>u(0,m)),i=await i,h(),i)),g=l(!0);async function u(n,a){let{data:s,error:rs}=await C.from("HISTORY").select("*").order("date",{ascending:!1}).range(n,a);return s}async function p(n){if(g.value)try{const a=await u(n,n+m);d.value.push(...a),g.value=!!a[0]}catch(a){console.log(a)}}S(c,async()=>{await p(d.value.length)},{distance:10});function k(n){let a=n.split("T");return a[0]=a[0].split("-").reverse().join("-"),a.join(" ")}function w(n){return n!=="2000-01-01"?n.split("-").reverse().join("-"):"∞"}return(n,a)=>(o(),_("div",{class:"height__body",ref_key:"listEl",ref:c},[(o(!0),_(L,null,H(d.value,s=>(o(),_("div",{class:x(["history__item",{"item-green":!!s.organization,"item-red":!!s.giver,"item-yellow":!!s.change}]),key:s.id},[e("div",N,[T,e("div",V,t(k(s.date)),1)]),s.change?(o(),_("div",R,[s.name===s.change.name?(o(),_("div",Y,[e("div",A,t(s.name),1)])):r("",!0),s.name!==s.change.name?(o(),_("div",M,[q,e("div",J,t(s.name),1),K,e("div",P,t(s.change.name),1)])):r("",!0),s.count!==s.change.count?(o(),_("div",Q,[U,e("div",W,t(s.count),1),X,e("div",Z,t(s.change.count),1)])):r("",!0),s.dateLife!==s.change.dateLife?(o(),_("div",ss,[es,e("div",ts,t(s.dateLife),1),as,e("div",os,t(s.change.dateLife),1)])):r("",!0)])):(o(),_("div",$,[e("div",j,[e("div",z,t(s.name),1),e("div",D,[e("div",E,t(s.organization||s.giver),1),e("div",O,t(w(s.dateLife)),1)])]),e("div",G,t(s.count),1)]))],2))),128))],512))}},_s={class:"history"},is=e("h1",null,"История",-1),cs=e("div",{class:"history__load"},[e("span",{class:"loader"})],-1),ds={__name:"HistoryView",setup(f){return(i,h)=>{const c=b("router-link");return o(),_("div",_s,[v(c,{to:{name:"Home"}},{default:y(()=>[is]),_:1}),(o(),B(F,null,{fallback:y(()=>[cs]),default:y(()=>[v(ns)]),_:1}))])}}};export{ds as default};
