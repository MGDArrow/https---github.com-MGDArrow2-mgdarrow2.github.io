import{u as _,e as p,k as g,c as $,a as U,g as r,h as o,l as h,b as y,o as C,m as t,p as L}from"./index-F1vNAxrB.js";import{_ as l,a as b}from"./VButton-PW1qBemq.js";import{u as q,_ as E,r as u,m as f,e as x,s as A}from"./index-j01HK2U5.js";const k=y("h1",null,"Регистрация",-1),T={__name:"AuthRegistration",setup(B){const w=_(),i=p(!1),d=p(!1),a=g({username:"",eMail:"",password:"",passwordConfirm:""}),v=$(()=>({username:{required:u,minLength:f(4)},eMail:{required:u,email:x},password:{required:u,minLength:f(8)},passwordConfirm:{required:u,sameAs:A(a.password)}})),V={username:{required:'Поле "Имя" не заполнено;',minLength:'Поле "Имя" должно быть не менее 4 символов;'},eMail:{required:'Поле "E-Mail" не заполнено;',email:'Поле "E-Mail" заполнено не верно;'},password:{required:'Поле "Пароль" не заполнено;',minLength:'Поле "Пароль" должно быть не менее 8 символов;'},passwordConfirm:{required:'Поле "Повторный пароль" не заполнено;',sameAs:'Поля "Пароль" и "Повторный пароль" должны совпадать;'}},n=p([]),m=q(v,a);async function M(){if(i.value=!0,d.value=!1,n.value=[],await m.value.$validate()){const e={email:a.eMail,password:a.password,options:{data:{username:a.username}}};try{await L().signUp(e),w.push({name:"Login"})}catch{d.value=!0}}else console.log(m.value.$errors),m.value.$errors.forEach(e=>{n.value.push(V[e.$property][e.$validator])});i.value=!1}return(c,e)=>(C(),U("form",{onSubmit:e[4]||(e[4]=h(s=>M(),["prevent"]))},[k,r(l,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=s=>a.username=s),modelModifiers:{trim:!0}},{default:o(()=>[t("Имя")]),_:1},8,["modelValue"]),r(l,{modelValue:a.eMail,"onUpdate:modelValue":e[1]||(e[1]=s=>a.eMail=s),modelModifiers:{trim:!0}},{default:o(()=>[t("E-Mail")]),_:1},8,["modelValue"]),r(l,{modelValue:a.password,"onUpdate:modelValue":e[2]||(e[2]=s=>a.password=s),modelModifiers:{trim:!0},type:"password"},{default:o(()=>[t("Пароль")]),_:1},8,["modelValue"]),r(l,{modelValue:a.passwordConfirm,"onUpdate:modelValue":e[3]||(e[3]=s=>a.passwordConfirm=s),modelModifiers:{trim:!0},type:"password"},{default:o(()=>[t("Повторный пароль")]),_:1},8,["modelValue"]),r(b,{disabled:i.value,error:d.value},{default:o(()=>[t("Зарегистрироваться")]),_:1},8,["disabled","error"]),r(E,{errors:n.value},null,8,["errors"])],32))}};export{T as default};
